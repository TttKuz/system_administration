### Глава 15: ОТЛАДКА
1. **Основы отладки**
2. **Процесс исправления неполадок**
3. **Средства диагностики**
4. **Организация работы по отладке**
5. **Тонкости отладки**
## Основы отладки
Отладка — это не просто исправление ошибки, а процесс, который начинается с понимания проблемы и ее причины. Первый шаг — разобраться в том, что пытается сделать пользователь и какой элемент системы не работает. Пользователь ожидает определенного результата, но получает что-то другое. Важно помочь пользователю четко изложить проблему, так как он может не всегда в состоянии это сделать самостоятельно.
## Процесс исправления неполадок
Для долговременной надежности необходимо устранять причину проблемы, а не искать временные решения. Системный подход к отладке включает в себя формирование гипотез, их проверку, запись результатов и внесение изменений на их основе. Без этого процесс может превратиться в случайные изменения, пока проблема не исчезнет.
Отладка обычно использует процесс исключения и последовательное уточнение. Процесс исключения предполагает выведение различных элементов системы до исчезновения проблемы. Последовательное уточнение включает в себя добавление компонентов в систему с проверкой на каждом этапе. Это можно рассматривать как отладку следования маршруту, где необходимо следовать за данными или проблемой, проверяя выходные данные каждого процесса.
## Средства диагностики
Отладка требует использования соответствующих диагностических средств. Это могут быть как физические устройства, так и программы, которые можно приобрести или разработать самостоятельно. Однако самым важным средством являются знания. Иногда простые средства собственной разработки или комбинация небольших инструментов оказываются наиболее эффективными.
При выборе новых средств важно оценивать их по проблемам, которые они могут решать, и не обращать внимания на показные аспекты. Высшая точка организации работы по отладке — наличие человека, который полностью понимает систему, от начала и до конца. В небольших системах это просто, но по мере их роста и усложнения люди специализируются и знают только свою часть системы.
## Организация работы по отладке
Отладка должна быть системным процессом, основанным на понимании того, что пытается сделать пользователь, и направленным на устранение первопричины проблемы, а не ее симптомов. Некоторые методы отладки являются субстрактивными — процесс исключения, — а другие аддитивны — последовательное уточнение.
## Тонкости отладки
Отладка требует методического подхода, основанного на знании пользовательских задач и направленного на устранение первопричины проблемы. Это помогает избежать временных решений и обеспечить долговременную надежность системы.

### Глава 16: ОДНОКРАТНОЕ УСТРАНЕНИЕ ПРОБЛЕМ
1. **Основы однократного устранения проблем**
2. **Ограничения и временные решения**
3. **Автоматизация и устранение первопричины**
4. **Постоянные меры и предупреждение проблем**
5. **Тонкости устранения проблем**
## Основы однократного устранения проблем
Исправление проблемы один раз и навсегда более эффективно, чем постоянное устранение одних и тех же неполадок. Однако, несмотря на очевидность этого подхода, иногда он оказывается невозможным из-за ограничений времени или ресурсов. В таких случаях временные решения могут казаться более удобными, особенно когда требуется быстрое вмешательство, а полное устранение проблемы требует значительных изменений или прерывания обслуживания.
## Ограничения и временные решения
Иногда временные меры становятся необходимыми, когда ограничения по времени или ресурсам не позволяют сразу приступить к полному устранению проблемы. Временные решения могут казаться более простыми и быстрыми, что психологически привлекает, так как создается впечатление, что проблема решена быстро. Однако важно помнить, что такие меры не устраняют первопричину и могут привести к повторению проблемы. Временные решения могут быть полезны в краткосрочной перспективе, но они не обеспечивают долговременной стабильности системы.
## Автоматизация и устранение первопричины
Автоматизация может помочь в устранении симптомов, но редко способна устранить саму проблему. Она может быть полезна при небольших сбоях, но не решает проблемы с ошибками в программном обеспечении. Важно стремиться к устранению первопричины, а не просто к автоматизации временных решений. Автоматизация может облегчить процесс, но она не заменяет системный подход к устранению проблем.
## Постоянные меры и предупреждение проблем
Лучше предупреждать проблемы, чем устранять их постоянно. Если вы обнаружили проблему в одном месте, важно исправить ее во всех аналогичных узлах или местах. Это помогает избежать повторения проблемы и обеспечивает более стабильную работу системы. Системным администраторам важно помнить, что проблемы нужно устранять правильно, а не просто временно решать. Это требует более глубокого анализа и понимания системы, чтобы предотвратить повторение проблем.
## Тонкости устранения проблем
Копирование известных решений, которые уже доказали свою эффективность, может быть более полезным, чем изобретение велосипеда. Проверка работы дважды перед внесением изменений помогает избежать ошибок и обеспечить более надежное решение. Важно не забывать, что проблемы нужно устранять правильно, а не просто временно решать, чтобы избежать их повторения. Это требует методического подхода и системного мышления, чтобы обеспечить долговременную надежность системы.

### Глава 17: УПРАВЛЕНИЕ ИЗМЕНЕНИЯМИ
1. **Основы управления изменениями**
2. **Компоненты управления изменениями**
3. **Управление риском и распространение информации**
4. **Составление графика и процессы**
5. **Технические аспекты и автоматизация**
## Основы управления изменениями
Управление изменениями — это процесс, который обеспечивает эффективное планирование, реализацию и последующий анализ изменений, внесенных в систему. Это означает, что изменения должны быть хорошо документированы, иметь план отмены и возможность воспроизводства. Управление изменениями также связано с управлением риском, так как изменения могут влиять на стабильность системы.
## Компоненты управления изменениями
Основные компоненты управления изменениями для системных администраторов включают:
- **Общение и составление графика**: Важно общаться с пользователями и другими системными администраторами, чтобы координировать изменения.
- **Планирование и проверка**: Изменения должны быть тщательно спланированы и проверены, чтобы минимизировать риски.
- **Процессы и документация**: Изменения должны соответствовать стандартным процессам и быть хорошо документированы, с учетом всех возможных последствий.
- **Контроль версий и автоматизация**: Используйте контроль версий для отслеживания изменений и облегчения отмены проблемных обновлений.
## Управление риском и распространение информации
Управление риском является важной частью деятельности системного администратора. Основные риски связаны с невыполненным обслуживанием и потерей данных. Создание резервных копий — один из основных способов управления риском. Первые шаги включают выявление и оценку рисков, а также разработку планов по их смягчению.
Распространение информации об изменениях имеет два аспекта: обеспечение, что вся группа системного администрирования знает о происходящем, и информирование пользователей. Важно не перегружать пользователей избыточными сообщениями, чтобы они не игнорировали важные уведомления.
## Составление графика и процессы
Распределение времени — ключевой компонент управления изменениями. Время внесения изменения может значительно влиять на пользователей. Крупномасштабные обновления должны происходить вне интервалов максимальной загрузки, чтобы обеспечить время на устранение проблем. Полезно определить время запрета на изменения, когда можно осуществлять только незначительные изменения.
Процессы и документация являются важными элементами управления изменениями. Соблюдение процессов и создание документации заставляет системных администраторов тщательно готовиться к значительным изменениям. Формы контроля изменения должны включать подробное описание изменений, затрагиваемые системы, причины изменения, риски, план отмены и время реализации.
## Технические аспекты и автоматизация
Вам может потребоваться документированная процедура обновления системных файлов конфигурации, которую будет соблюдать каждый системный администратор. Эта процедура должна быть последовательно применена везде, где обновляются файлы конфигурации. Она должна включать шаги, которые нужно соблюдать в случае неудачи, и выдаваться всем системным администраторам при вступлении в группу.
История изменений позволяет просматривать изменения, внесенные в файл, что полезно в случае повреждения текущей версии. Обычно в истории изменений записывается, кто и когда внес изменение, и можно добавлять комментарии.
Автоматизированные проверки должны выполняться для обеспечения того, что файлы не содержат синтаксических ошибок, и все приложения используют новую информацию. Эти этапы должны выполняться автоматизированной программой, которая также сообщает серверам о изменениях в файлах конфигурации.
Автоматическая проверка системных файлов на ошибки формата и синтаксиса перед утверждением изменения обеспечивает более серьезную стабильность систем. Создание оконечного интерфейса для системных файлов, который задает соответствующие вопросы и проверяет ответы на ошибки, помогает правильно обновлять файлы.

### Глава 18: ОБНОВЛЕНИЯ СЕРВЕРОВ
1. **Основы обновления серверов**
2. **Процесс обновления**
3. **Составление контрольного списка и проверка совместимости**
4. **Тестирование и план отмены**
5. **Технический перерыв и выполнение обновления**
6. **Проверка и отмена обновления**
7. **Сообщение пользователям и анализ**
8. **Тонкости обновления**
## Основы обновления серверов
Обновление серверов может осуществляться различными способами, и чем более критичен узел, тем важнее правильность выполнения обновления. Основная задача любого обновления операционной системы (ОС) заключается в том, чтобы все службы, которые предоставлялись до обновления, продолжали работать после него. Обновление может проводиться для расширения функциональности или повышения надежности, но не должно снижать их.
## Процесс обновления
Процесс обновления серверов включает в себя несколько ключевых шагов:
1. **Составьте контрольный список служб**: Укажите, какие службы предоставлялись сервером, кто их использует и какие программы их обеспечивают.
2. **Проверьте совместимость программ**: Убедитесь, что каждая программа будет работать с новой ОС, и запланируйте обновление для тех, которые не будут совместимы.
3. **Разработайте тесты для проверки**: Создайте тесты для проверки работоспособности каждой службы.
4. **Напишите план отмены**: Определите условия, при которых будет задействован план отмены.
5. **Выберите технический перерыв**: Согласуйте время для обновления с пользователями.
6. **Объявите об обновлении**: Сообщите пользователям о предстоящем обновлении.
7. **Выполните тесты**: Проверьте тесты перед началом обновления.
8. **Заблокируйте пользователей**: Предотвратите вход пользователей в систему во время обновления.
9. **Проведите обновление**: Выполните обновление под наблюдением другого человека.
10. **Повторите тесты**: Убедитесь, что все службы работают корректно.
11. **Если тесты неудачны, выполните план отмены**: В случае неудачи вернитесь к предыдущему состоянию.
12. **Разблокируйте пользователей**: Восстановите доступ пользователей.
13. **Сообщите пользователям о завершении/отмене**: Информируйте пользователей о результатах обновления.
14. **Проанализируйте результаты**: Определите, что прошло правильно, а что нет.
## Составление контрольного списка и проверка совместимости
Контрольный список служб помогает отслеживать, какие службы предоставляются сервером, кто их использует и какие программы их обеспечивают. Электронные таблицы могут быть полезны для представления этой информации. Проверка совместимости программ с новой ОС важна для предотвращения проблем после обновления. Свяжитесь с разработчиками для получения информации о совместимости.
## Тестирование и план отмены
Тесты для проверки должны быть записаны в виде скриптов, которые могут быть запущены автоматически. Это позволяет быстро проверять работоспособность служб. План отмены должен включать конкретные условия и время, необходимое для его выполнения. Это поможет быстро реагировать на проблемы, которые могут возникнуть во время обновления.
## Технический перерыв и выполнение обновления
Выбор технического перерыва важен для минимизации влияния обновления на пользователей. Объявите об обновлении в соответствии с установленным порядком, чтобы пользователи были готовы к изменениям. Выполнение обновления должно проводиться под наблюдением другого человека, чтобы избежать ошибок.
## Проверка и отмена обновления
После обновления повторите все тесты, чтобы убедиться, что все службы работают корректно. Если тесты неудачны, выполните план отмены. Это может быть необходимо, если обновление занимает больше времени, чем ожидалось, или если тесты не выполняются.
## Сообщение пользователям и анализ
После завершения обновления сообщите пользователям о его результатах. Если обновление было отменено, проинформируйте пользователей о том, что система вернулась к предыдущему состоянию. Проанализируйте, что прошло правильно, а что нет, чтобы улучшить процесс в будущем.
## Тонкости обновления
**Добавляйте и удаляйте службы одновременно**: Удаление службы может быть простым, но важно убедиться, что она не используется. Это подобно разрушению здания, но сначала нужно убедиться, что в нем нет людей.
**Полная установка**: Иногда лучше полностью переустановить систему, чем обновлять ее, чтобы избежать проблем с оставшимися файлами и фрагментированными системами.
**Повторное использование тестов**: Если тесты хорошо написаны, их можно интегрировать в систему мониторинга реального времени, что упрощает процесс обновления.
**Запись изменений системы**: Ведение лога изменений помогает в создании контрольного списка служб. Храните логи в википедии или на общем файловом сервере, но соблюдайте правила их ведения.
**Генеральная репетиция**: Проведение генеральной репетиции требует ресурсов, но может быть полезно для оценки времени, необходимого для обновления.
**Установка старых и новых версий на одной машине**: Иногда удобно оставлять старые версии на машине, пока новые программы устанавливаются и сертифицируются.
**Минимальные изменения первоначальной версии**: Обновления становятся проще, если делать нужно мало. Планирование и документация помогают в этом процессе.
